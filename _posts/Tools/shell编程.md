---
title: shell编程
date: 2020-07-30 11:43:48
categories: Linux
tags: shell
---

# shell编程

> shell脚本的本质：shell命令的有序集合  
> shell编程的基本过程：  

>1. 建立shell文件：包含任意多行操作系统命令或者shell命令的文本文件
>2. 赋予shell文件执行权限：chown修改文件所有者，chgrp修改文件所有组，chmod修改文件权限
>3. 执行shell文件：直接在命令行中调用shell程序

## shell变量
> shell允许用户建立变量存储数据，单不支持数据类型，将任何赋给变量的值都解释为一串字符串。  
> 命名规则与c++相同

### 变量的种类
1. 用户自定义变量
	1. 通常用大写表示
	2. 变量的调用：在变量前加$
	3. 使用unset命令删除变量的赋值
2. 位置变量即命令行参数
	1. $0 与键入的命令行一样，包含脚本文件名
	2. $1...$9分别包含第一个到第九个命令行参数
	3. $# 包含命令行参数的个数
	4. $@ 包含所有命令行参数
	5. $? 包含前一个命令的退出状态
	6. $* 包含所有命令行参数
	7. $$ 包含正在执行进程的ID号
3. 预定义变量
4. 环境变量

### shell程序和语句
> shell程序由零或者多条shell语句构成。语句包括三类：说明性语句、功能性语句和结构性语句

1. 说明性语句：以#开始到改行结束，不被解释执行
2. 功能性语句：任意的shell命令、用户程序或其他shell程序
3. 结构性语句：条件测试语句、多路分支语句、循环语句、循环控制语句等。

### 功能性语句
#### read
* 从标准输入读入一行，并赋值给后面的变量
* 格式：read var

#### expr
* 算术运算命令。
* 格式：expr 计算式
* 数字和运算符之间一定要加空格

#### test
* 测试三种对象：字符串、整数和文件属性
* 格式：test "$string" = "yes"测试是否为字符串
* 格式：test $num -eq 18 测试num的值是否为整数18
* 格式：test -d tmp 测试是否为一个目录名