---
title: Linux文件系统
date: 2020-07-30 11:43:43
categories: Tools
tags: file
---

# Linux文件系统

> 内容提纲：  
> 	1. 文件系统类型  
> 	2. 文件系统结构  
> 	3. 文件系统导航  
> 	4. 文件资源管理  
> 	5. 文件内容管理  
> 	6. 链接文件创建  
> 	7. 文件压缩与打包  

文件系统：***用于组织和管理计算机存储设备上的大量文件，并提供用户交互借口***

## 文件系统类型
----
Linux是一种兼容性很高的系统，支持的文件系统格式很多，答大体可以分为以下几类：

### 磁盘文件系统
* 指本地主机中实际可以访问到的文件系统
* 包括硬盘、CD－ROM、DVD、USB存储器、磁盘阵列等
* 文件系统格式：autofs、coda、Ext、Ext2、Ext3、VFAT、ISO9660(通用的CD－ROM)、UFS(Unix文件系统)、ReiserFS、XFS、JFS、FAT(文件分配表)、FAT16、FAT32、NTFS
### 网络文件系统
* 可以远程访问的文件系统
* 这种文件系统在服务器端仍是本地的磁盘文件系统，客户机通过过网络远程访问数据
* 常见的格式有：NFS(网络文件系统)、Samba、AFP(Apple文案归档协议)、WebDAV等
### 专用/虚拟文件系统
* 不驻留在磁盘上的文件系统
* 常见的格式有：TMPFS(临时文件系统)、PROCFS(进程文件系统)和LOOPBACKFS(回送文件系统)
### 小常识
* 目前Ext3是Linux系统广泛使用的一种格式
* 最大的特点是日志文件系统：可将整个磁盘的写入动作完整的记录在磁盘的饿某个区域上，以便在必要时回溯追踪
* FAT16、FAT32、NTFS是windows主要的文件系统格式，Linux也可以很好的支持，不过在以前的版本中需要单独关在windows文件系统

### SCSI与设备命名
* SCSI硬盘的设备名称是"/dec/sda"
* IDE硬盘的设备名称是"/dev/hda"
* 名称说明：前两个字母说明设备类型，第三个字母说明具体的设备
* 如果很在意系统的高性能和稳定性，应该使用SCSI硬盘

### 交换分区
* 将内存中的内容写入硬盘或从硬盘中读出，成为内存交换
* 交换飞去最小必需等于计算机的内存，最大为1GB
* 可以创建多余一个的交换分区
* 尽量把交换分区放在硬盘驱动器的起始位置

##文件系统结构
----
### 分区与目录的关系
* 在windows下，目录结构属于分区，在Linux下，分区术语目录结构
* windows在这个分区下可以有多个目录，如：在c盘下有多个文件夹；Linux在一个目录中可以挂载多个文件系统，如：‘／’目录下的‘／home’可以单独挂载一个分区
* Linux文件系统就是一个树形的分层组织，根目录是整个文件系统的唯一起点

### 基本目录
|   目录名    |                             描述                             |
| :---------: | :----------------------------------------------------------: |
|      /      |                       文件系统的根目录                       |
|    /bin     |             存放系统中最常用的可执行文件(二进制)             |
|    /boot    |    存放Linux内核和系统启动文件，包括Grub、lilo启动起程序     |
|    /dev     |   存放所有设备文件、包括硬盘、分区、键盘、鼠标、USB、tty等   |
|    /etc     |                        所有的配置文件                        |
|    /home    |                     用户主目录的默认位置                     |
|   /initrd   | 存放启动时挂载initrd.img印象文件的目录，以及载入所需设备模块的地方 |
|    /lib     |  存放共享的库文件，包含许多被/bin和/sbin中程序使用的库文件   |
| /lost+found |                   存放由fsck放置的零散文件                   |
|   /media    |   ubuntu系统自动挂载软驱、USB存储器后，存放临时读入的文件    |
|    /mnt     |             通常用于作为被挂载的文件系统的挂载点             |
|    /opt     |         第三方开发者用来简易的安装和卸载他们的软件包         |
|    /proc    |                   存放所有标志为文件的进程                   |
|    /root    |                       root用户的主目录                       |
|    /sbin    |                     存放更多的可执行文件                     |
|    /srv     |                                                              |
|    /sys     |                                                              |
|    /tmp     |                   存放用户和程序的临时文件                   |
|    /usr     |              存放与系统用户直接有关的文件和目录              |
|    /var     |                      存放长度可变的文件                      |

## 文件与目录命令
----
### pwd
* 显示用户在文件系统中的当前位置
* 格式：pwd

### ls
* 列出用户有权访问的任何目录的内容
* 格式：ls [-a|-A|-c|-F|-l|-L|-o|-R|-|t|-u] [filename|directory]
* 参数是文件名时，将现实文件名以及所要求的信息，包括文件大小、格式、访问权限等，若为目录名时，将列出该目录的所有子目录和文件

### 文件类型
|   文件类型   | 类型符 |                       描述                       |
| :----------: | :----: | :----------------------------------------------: |
|   普通文件   |   -    |   指ASCII文本文件、二进制可执行文件、硬件链接    |
|    块文件    |   b    |               块输入/输出设备文件                |
| 字符设备文件 |   c    | 原始输入/输入设备文件，每次I/O操作仅传送一个字符 |
|   目录文件   |   d    |               包含若干文件或子目录               |
| 符号链接文件 |   l    |          只保留文件地址，而不是文件本身          |
|   命令管道   |   p    |  一中进程间通信的机制，用于进程间通讯的暂时文件  |
|    套接字    |   s    |   用户进程通信，两台计算机件通讯的应用程序接口   |

### touch
* 创建一个新文件
* 格式：touch [filename]
* 如果文件已经有了就改变这个文件的最后修改日期

### file
* 判定一个文件的类型
* 格式：file [filename]

### cp
* 用于将给出的文件或目录拷贝到另一个文件或目录中
* 格式：cp [-a|-d|-f|-i|-p|-r|-l|-v] [source] [dest]
* 参数列表

| 选项 |                             描述                             |
| :--: | :----------------------------------------------------------: |
|  -a  | 在拷贝目录时使用，保留链接、文件属性，并递归拷贝目录，求作用等于dpr选项的组合 |
|  -d  |                        拷贝时保留链接                        |
|  -f  |                 覆盖已存在的目标文件时不提示                 |
|  -i  |                         与f参数相反                          |
|  -p  |    除复制原文件内容外，还将其修改时间和访问权限也同时复制    |
|  -r  | 若原文件是一个目录，cp命令将递归复制该目录下的所有文件和子目录 |
|  -l  |                     不拷贝，只是链接文件                     |
|  -v  |                      显示详细的复制过程                      |

### mv
* 改名，移动文件或目录
* 格式：mv [-i|-f|-v] [source] [dest]
* 参数列表

| 选项 |             描述             |
| :--: | :--------------------------: |
|  -f  | 覆盖已存在的目标文件时不提示 |
|  -f  |         与f参数相反          |
|  -v  |      显示详细的复制过程      |

### rm
* 删除文件
* 格式：rm [-i|-f|-r|-v] [dest]
* 参数列表

| 选项 |             描述             |
| :--: | :--------------------------: |
|  -f  | 覆盖已存在的目标文件时不提示 |
|  -f  |         与f参数相反          |
|  -r  |           递归删除           |
|  -v  |      显示详细的复制过程      |

### mkdir
* 创建目录
* 格式：mkdir [-p] directory_name
* p参数表示，可以嵌套创建子目录
### rkdir
* 删除目录
* 格式：rmdir [-p] directory_name
* p参数表示，可以递归删除子目录

### cat
* 读取指定文件的内容
* 格式：cat [-v|-T|-E|-u] [filename]
* 参数列表

| 选项 |             描述             |
| :--: | :--------------------------: |
|  -v  | 一种特殊形式形式显示控制字符 |
|  -T  |        与－v同时使用         |
|  -E  |        行末尾显示‘$‘         |
|  -u  |       输出不经过缓冲区       |

## 压缩与打包
----k
> 归档文件：将一组文件或者目录保存在一个文件中  
> 压缩文件：同归档文件一样，并按照某种存储格式保存在磁盘上，所占磁盘空间比其中所有文件中和要少  

### 工具
1. 压缩工具

	| 压缩  |  解压   |   说明   |
	| :---: | :-----: | :------: |
	| gzip  | gunzip  |   常用   |
	| bzip2 | bunzip2 | 性能最好 |
	|  zip  |  unzip  |          |
	
2. 归档工具：tar

### zip
* 格式：zip [-m|-r|-j|-k|-n|-t|-x|-y|-num] zipfile filelist
* 参数列表

	| 选项 |                     描述                     |
	| :--: | :------------------------------------------: |
	|  m   |               压缩后删除原文件               |
	|  r   |     递归的压缩文件下的所有子目录及其文件     |
	|  j   |     不要压缩文件夹下的所有子目录及其文件     |
	|  k   |   使用8.3名名方式修改文件名，然后进行压缩    |
	|  n   |     不压缩指定后缀名的文件，直接归档保存     |
	|  t   |         指定压缩某一日期后创建的文件         |
	|  x   |             排除指定的文件不压缩             |
	|  y   | 之压缩链接文件本身，不包括链接目标文件的内容 |
	| num  |              指定压缩比率(1～9)              |
	
### unzip
* 格式：unzip [-x|-Z|-l] zipfile
* 参数列表

	| 选项 |              描述              |
	| :--: | :----------------------------: |
	|  x   |      排除指定的文件不压缩      |
	|  Z   |          查看文件信息          |
	|  l   | 查看文件中的实际包含的文件内容 |

### gzip
* 格式：gzip [-l|-d|-num] zipfile
* 参数列表

	| 选项 |              描述              |
	| :--: | :----------------------------: |
	|  l   | 查看文件中的实际包含的文件内容 |
	|  d   |              解压              |
	| num  |       指定压缩比率(1～9)       |


### gunzip
* 格式：gunzip [-f] zipfile
* －f表示对覆盖同名文件不做提示

### tar
* 格式：tar [-t|-x|-u|-c|-v|-f|-j|-z] tarfile filelist
* 参数列表

	| 选项 |                         描述                          |
	| :--: | :---------------------------------------------------: |
	|  t   |                 显示归档文件中的内容                  |
	|  x   |                     释放归档文件                      |
	|  u   |                     更新归档文件                      |
	|  c   |                 创建一个新的归档文件                  |
	|  v   | 显示归档和释放的过程信息(很多命令加v都是显示过程信息) |
	|  f   |      用户指定归档文件的文件名，否则使用默认名称       |
	|  j   |            由tar生成归档，然后由bzip2压缩             |
	|  z   |             由tar生成归档，然后由gzip压缩             |
	

***压缩的终极方案：tar -jcvf a.tar.bz a*****
